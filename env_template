# 🎓 费曼学习系统 - 环境配置模板
# ============================================
# 复制此文件为 .env 并根据您的实际环境修改配置项
# 使用方法: cp env_template .env

# ======================
# 基础配置
# ======================
ENVIRONMENT=development
DEBUG=true

# ======================
# API 服务配置
# ======================
API_HOST=0.0.0.0
API_PORT=8005
API_RELOAD=true
API_WORKERS=1

# ======================
# OpenAI 配置 (必需)
# ======================
OPENAI_API_KEY=your-openai-api-key-here
OPENAI_MODEL=gpt-4o
OPENAI_TEMPERATURE=0.7
OPENAI_MAX_TOKENS=2000
OPENAI_TIMEOUT=30

# ======================
# 智谱AI 配置 (备选)
# ======================
ZHIPU_API_KEY=your-zhipu-api-key-here
ZHIPU_MODEL=glm-4.5-airx
ZHIPU_EMBEDDING_MODEL=embedding-3
ZHIPU_BASE_URL=https://open.bigmodel.cn/api/paas/v4/

# ======================
# 第三方工具API配置
# ======================
# 网络搜索 (推荐)
TAVILY_API_KEY=your-tavily-api-key-here

# 百度翻译
BAIDU_TRANSLATE_API_KEY=your-baidu-translate-api-key-here
BAIDU_TRANSLATE_SECRET_KEY=your-baidu-translate-secret-key-here

# 数学计算
WOLFRAM_API_KEY=

# 代码执行
JUDGE0_API_KEY=your-judge0-api-key-here

# 图表生成 (可选)
QUICKCHART_API_KEY=

# ======================
# 知识图谱配置
# ======================
KG_BACKEND=local
KG_STORAGE_PATH=data/knowledge_graph.json
KG_MAX_NODES=1000
KG_MAX_EDGES=5000

# ======================
# Neo4j 图数据库配置 (可选)
# ======================
NEO4J_URI=bolt://localhost:7687
NEO4J_USERNAME=neo4j
NEO4J_PASSWORD=neo4j123
NEO4J_DATABASE=neo4j
NEO4J_MAX_CONNECTION_POOL_SIZE=50
NEO4J_CONNECTION_TIMEOUT=30
NEO4J_MAX_TRANSACTION_RETRY_TIME=15

# ======================
# Redis 缓存配置 (可选)
# ======================
REDIS_URL=redis://localhost:6379
REDIS_PASSWORD=
REDIS_DB=0

# ======================
# Supabase 数据库配置 (可选)
# ======================
SUPABASE_URL=https://tcsevxdqygghtomvrdpw.supabase.co
SUPABASE_SERVICE_ROLE_KEY=your-supabase-service-role-key-here
SUPABASE_ANON_KEY=your-supabase-anon-key-here

# ======================
# 监控与追踪配置
# ======================
MONITORING_ENABLED=true
TRACING_ENABLED=false
METRICS_ENABLED=true

# LangFuse 追踪
LANGFUSE_ENABLED=false
LANGFUSE_PUBLIC_KEY=your-langfuse-public-key-here
LANGFUSE_SECRET_KEY=your-langfuse-secret-key-here
LANGFUSE_HOST=https://cloud.langfuse.com

# Prometheus 监控
PROMETHEUS_PORT=9090
METRICS_ENDPOINT=/metrics
METRICS_SCRAPE_INTERVAL=15s

# OpenTelemetry 配置
OTEL_SERVICE_NAME=feynman-learning-system
OTEL_EXPORTER_OTLP_ENDPOINT=http://localhost:4317
OTEL_RESOURCE_ATTRIBUTES=service.name=feynman,service.version=3.2

# ======================
# 成本控制
# ======================
DAILY_COST_LIMIT_USD=100
MONTHLY_COST_LIMIT_USD=1000
TOKEN_RATE_LIMIT=10000
COST_TRACKING_ENABLED=true

# ======================
# 安全配置
# ======================
SECURITY_ENABLED=true
CORS_ORIGINS=["http://localhost:3000", "http://127.0.0.1:3000"]

# 请求限制
REQUEST_TIMEOUT_ENABLED=true
REQUEST_TIMEOUT_SECONDS=300
REQUEST_SIZE_LIMIT_ENABLED=true
MAX_REQUEST_SIZE_BYTES=10485760

# 限流配置
RATE_LIMIT_ENABLED=true
RATE_LIMIT_REQUESTS_PER_MINUTE=60
RATE_LIMIT_BURST=10

# ======================
# 日志配置
# ======================
LOG_LEVEL=INFO
LOG_FORMAT=json
LOG_FILE=storage/logs/feynman.log

# ======================
# 前端配置
# ======================
FRONTEND_URL=http://localhost:3000
NEXT_PUBLIC_API_URL=http://localhost:8005
BACKEND_URL=http://localhost:8001
BACKEND_TIMEOUT=30

# ======================
# 流式输出配置
# ======================
SSE_ENABLED=true
SSE_HEARTBEAT_INTERVAL=15
SSE_MAX_CONNECTIONS=100

# ======================
# 缓存配置
# ======================
CACHE_TTL=3600
MEMORY_CACHE_SIZE=1000

# ======================
# 图谱处理配置
# ======================
GRAPH_ENABLED=true
GRAPH_BATCH_SIZE=100
GRAPH_MAX_DEPTH=3

# ======================
# 评测配置
# ======================
RAGAS_ENABLED=true
EVALUATION_SAMPLE_SIZE=100

# ======================
# 多租户配置 (企业版功能)
# ======================
MULTI_TENANT_ENABLED=false
DEFAULT_TENANT_ID=default

# ======================
# 开发工具配置
# ======================
DEV_TOOLS_ENABLED=true
PROFILING_ENABLED=false

# 告警配置
ALERTING_ENABLED=true
WEBHOOK_URL=
EMAIL_ALERTS=

# ======================
# 超时配置
# ======================
LLM_TIMEOUT=120
KNOWLEDGE_GRAPH_BUILD_TIMEOUT=180
