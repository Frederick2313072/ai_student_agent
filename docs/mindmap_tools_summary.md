# æ€ç»´å¯¼å›¾å·¥å…·å®ç°æ€»ç»“

## æ¦‚è¿°

æˆåŠŸä¸ºAIå­¦ç”Ÿè´¹æ›¼å­¦ä¹ ç³»ç»Ÿæ·»åŠ äº†æ€ç»´å¯¼å›¾å’Œæµç¨‹å›¾å¯è§†åŒ–å·¥å…·ï¼Œå®Œå…¨åŸºäºå¤–éƒ¨APIå®ç°ï¼Œæ— éœ€æœ¬åœ°å›¾å½¢åº“ä¾èµ–ã€‚

## ğŸ¯ å®ç°çš„åŠŸèƒ½

### 1. æ€ç»´å¯¼å›¾å·¥å…· (create_mindmap)

#### æ”¯æŒæ ¼å¼
- **Mermaidæ€ç»´å¯¼å›¾**: ç°ä»£åŒ–ç•Œé¢ï¼Œæ”¯æŒåœ¨çº¿ç¼–è¾‘
- **PlantUMLæ€ç»´å¯¼å›¾**: ä¸“ä¸šå¤–è§‚ï¼Œä¸°å¯Œçš„æ ·å¼é€‰é¡¹
- **QuickChartç½‘ç»œå›¾**: å¤æ‚å…³ç³»å±•ç¤ºï¼ˆå¯é€‰ï¼Œéœ€APIå¯†é’¥ï¼‰

#### æ ¸å¿ƒç‰¹æ€§
- ğŸŒ å¤šå±‚çº§ç»“æ„æ”¯æŒ
- ğŸ”„ æ™ºèƒ½è¯­æ³•è½¬æ¢
- ğŸŒ è‡ªåŠ¨ç”Ÿæˆåœ¨çº¿æŸ¥çœ‹é“¾æ¥
- ğŸ“¸ ä¸€é”®å¯¼å‡ºå›¾ç‰‡é“¾æ¥
- ğŸ›¡ï¸ å®Œå–„çš„é”™è¯¯å¤„ç†

### 2. æµç¨‹å›¾å·¥å…· (create_flowchart)

#### æ”¯æŒæ ¼å¼
- **Mermaidæµç¨‹å›¾**: æ¸…æ™°çš„æµç¨‹å¯è§†åŒ–
- **PlantUMLæµç¨‹å›¾**: ä¸“ä¸šçš„æµç¨‹å›¾è¡¨

#### æ™ºèƒ½ç‰¹æ€§
- ğŸ¤– è‡ªåŠ¨è¯†åˆ«æ¡ä»¶åˆ†æ”¯
- ğŸ“Š æ­¥éª¤åºåˆ—åŒ–
- ğŸ”— æµç¨‹è¿æ¥è‡ªåŠ¨åŒ–

### 3. åœ¨çº¿æœåŠ¡é›†æˆ

#### å…è´¹æœåŠ¡ï¼ˆæ— éœ€APIå¯†é’¥ï¼‰
- **Mermaid Live Editor**: https://mermaid.live/
- **Mermaid Image Service**: https://mermaid.ink/
- **PlantUML Server**: http://www.plantuml.com/
- **arXiv API**: å­¦æœ¯è®ºæ–‡æœç´¢
- **Wikipedia API**: ç™¾ç§‘çŸ¥è¯†æŸ¥è¯¢

#### å¯é€‰ä»˜è´¹æœåŠ¡
- **QuickChart API**: é«˜çº§å›¾è¡¨åŠŸèƒ½

## ğŸ“ æ–‡ä»¶ç»“æ„

```
ai_student_agent/
â”œâ”€â”€ agent/
â”‚   â”œâ”€â”€ tools.py                    # æ–°å¢æ€ç»´å¯¼å›¾å·¥å…·å®ç°
â”‚   â””â”€â”€ agent.py                    # æ›´æ–°å·¥å…·åˆ—è¡¨
â”œâ”€â”€ docs/
â”‚   â”œâ”€â”€ tools_guide.md              # å®Œæ•´å·¥å…·ä½¿ç”¨æŒ‡å—
â”‚   â””â”€â”€ mindmap_tools_summary.md    # æœ¬æ–‡æ¡£
â”œâ”€â”€ test_mindmap_tools.py           # å®Œæ•´æµ‹è¯•å¥—ä»¶
â”œâ”€â”€ simple_mindmap_test.py          # ç®€åŒ–æµ‹è¯•ï¼ˆæ— ä¾èµ–ï¼‰
â”œâ”€â”€ mindmap_demo.py                 # åŠŸèƒ½æ¼”ç¤ºè„šæœ¬
â””â”€â”€ environments/
    â””â”€â”€ test.env                    # ç¯å¢ƒå˜é‡é…ç½®
```

## ğŸ› ï¸ æŠ€æœ¯å®ç°

### å·¥å…·æ¶æ„

```mermaid
graph TD
    A[Agentè°ƒç”¨] --> B[create_mindmap]
    A --> C[create_flowchart]
    
    B --> D[è¯­æ³•è½¬æ¢]
    B --> E[URLç¼–ç ]
    B --> F[åœ¨çº¿æ¸²æŸ“]
    
    C --> G[æµç¨‹è§£æ]
    C --> H[æ¡ä»¶è¯†åˆ«]
    C --> I[å›¾è¡¨ç”Ÿæˆ]
    
    D --> J[Mermaidè¯­æ³•]
    D --> K[PlantUMLè¯­æ³•]
    D --> L[QuickCharté…ç½®]
    
    F --> M[åœ¨çº¿æŸ¥çœ‹é“¾æ¥]
    F --> N[å›¾ç‰‡ä¸‹è½½é“¾æ¥]
```

### æ ¸å¿ƒç®—æ³•

#### 1. å†…å®¹è§£æç®—æ³•
```python
def _convert_to_mermaid_syntax(topic: str, content: str) -> str:
    """æ™ºèƒ½è§£æç¼©è¿›å±‚çº§ï¼Œè½¬æ¢ä¸ºMermaidè¯­æ³•"""
    lines = content.strip().split('\n')
    mermaid_lines = ["mindmap", f"  root)({topic})"]
    
    for line in lines:
        # æ ¹æ®ç¼©è¿›å’Œæ ‡è®°ç¬¦è¯†åˆ«å±‚çº§
        if line.startswith('- ') or line.startswith('* '):
            # ä¸€çº§åˆ†æ”¯
        elif line.startswith('  - ') or line.startswith('  * '):
            # äºŒçº§åˆ†æ”¯
        # ... å¤„ç†æ›´å¤šå±‚çº§
```

#### 2. URLç¼–ç ç®—æ³•
```python
def generate_online_links(diagram_code: str, format_type: str):
    """ç”Ÿæˆåœ¨çº¿æŸ¥çœ‹å’Œå›¾ç‰‡é“¾æ¥"""
    if format_type == "mermaid":
        encoded = urllib.parse.quote(diagram_code)
        return {
            "edit_url": f"https://mermaid.live/edit#{encoded}",
            "image_url": f"https://mermaid.ink/img/{encoded}"
        }
    elif format_type == "plantuml":
        compressed = zlib.compress(diagram_code.encode('utf-8'))
        encoded = base64.b64encode(compressed).decode('ascii')
        return {
            "view_url": f"http://www.plantuml.com/plantuml/uml/{encoded}",
            "image_url": f"http://www.plantuml.com/plantuml/png/{encoded}"
        }
```

## ğŸ§ª æµ‹è¯•éªŒè¯

### æµ‹è¯•è¦†ç›–
- âœ… **è¯­æ³•è½¬æ¢æµ‹è¯•**: Mermaidå’ŒPlantUMLæ ¼å¼è½¬æ¢
- âœ… **URLç¼–ç æµ‹è¯•**: åœ¨çº¿é“¾æ¥ç”ŸæˆéªŒè¯
- âœ… **è¾¹ç•Œæƒ…å†µæµ‹è¯•**: ç©ºå†…å®¹ã€ç‰¹æ®Šå­—ç¬¦ã€é”™è¯¯æ ¼å¼
- âœ… **é›†æˆæµ‹è¯•**: Agentå·¥å…·åˆ—è¡¨é›†æˆ
- âœ… **æ€§èƒ½æµ‹è¯•**: å¤šç§è¾“å…¥æ ¼å¼å¤„ç†

### æµ‹è¯•ç»“æœ
```
ğŸš€ æ€ç»´å¯¼å›¾å·¥å…·ç®€åŒ–æµ‹è¯•å¥—ä»¶
============================================================
è¯­æ³•è½¬æ¢: âœ… é€šè¿‡
URLç¼–ç : âœ… é€šè¿‡  
æµç¨‹å›¾è½¬æ¢: âœ… é€šè¿‡
è¾¹ç•Œæƒ…å†µ: âœ… é€šè¿‡

æ€»ä½“ç»“æœ: 4/4 é¡¹æµ‹è¯•é€šè¿‡
ğŸ‰ æ‰€æœ‰æ ¸å¿ƒåŠŸèƒ½æµ‹è¯•é€šè¿‡ï¼
```

## ğŸ“Š å·¥å…·èƒ½åŠ›å¯¹æ¯”

| å·¥å…·ç±»å‹ | Mermaid | PlantUML | QuickChart |
|---------|---------|----------|------------|
| æ€ç»´å¯¼å›¾ | âœ… | âœ… | âœ… |
| æµç¨‹å›¾ | âœ… | âœ… | âŒ |
| åœ¨çº¿ç¼–è¾‘ | âœ… | âŒ | âŒ |
| å›¾ç‰‡å¯¼å‡º | âœ… | âœ… | âœ… |
| APIå¯†é’¥ | å…è´¹ | å…è´¹ | å¯é€‰ |
| ä¸­æ–‡æ”¯æŒ | âœ… | âœ… | âœ… |

## ğŸ¨ ä½¿ç”¨ç¤ºä¾‹

### åˆ›å»ºå­¦ä¹ è®¡åˆ’æ€ç»´å¯¼å›¾
```python
result = create_mindmap(
    topic="Pythonå­¦ä¹ è·¯å¾„",
    content="""
    - åŸºç¡€è¯­æ³•
      - å˜é‡å’Œæ•°æ®ç±»å‹
      - æ§åˆ¶ç»“æ„
      - å‡½æ•°å®šä¹‰
    - è¿›é˜¶æ¦‚å¿µ
      - é¢å‘å¯¹è±¡ç¼–ç¨‹
      - å¼‚å¸¸å¤„ç†
      - æ¨¡å—å’ŒåŒ…
    """,
    style="mermaid"
)
```

### åˆ›å»ºç®—æ³•æµç¨‹å›¾
```python
result = create_flowchart(
    title="å¿«é€Ÿæ’åºç®—æ³•",
    steps="""
    - é€‰æ‹©åŸºå‡†å…ƒç´ 
    - æ•°ç»„é•¿åº¦æ˜¯å¦å°äºç­‰äº1ï¼Ÿ
    - è¿”å›æ•°ç»„
    - åˆ†å‰²æ•°ç»„ä¸ºä¸¤éƒ¨åˆ†
    - é€’å½’æ’åºå·¦åŠéƒ¨åˆ†
    - é€’å½’æ’åºå³åŠéƒ¨åˆ†
    - åˆå¹¶ç»“æœ
    """,
    style="mermaid"
)
```

## ğŸ”— é›†æˆåˆ°è´¹æ›¼å­¦ä¹ æµç¨‹

### å­¦ä¹ åœºæ™¯åº”ç”¨

1. **æ¦‚å¿µè§£é‡Šé˜¶æ®µ**
   - ç”¨æˆ·è§£é‡Šå¤æ‚æ¦‚å¿µæ—¶ï¼ŒAIè‡ªåŠ¨ç”Ÿæˆæ€ç»´å¯¼å›¾å¸®åŠ©æ¢³ç†ç»“æ„
   - å¯è§†åŒ–æ¦‚å¿µå±‚æ¬¡å…³ç³»

2. **ç–‘ç‚¹åˆ†æé˜¶æ®µ**
   - å°†å‘ç°çš„ç–‘ç‚¹ä»¥æ€ç»´å¯¼å›¾å½¢å¼å±•ç¤º
   - æ ‡è®°ä¸åŒç½®ä¿¡åº¦çš„é—®é¢˜ç‚¹

3. **çŸ¥è¯†å¼ºåŒ–é˜¶æ®µ**
   - ç”Ÿæˆå­¦ä¹ è·¯å¾„æµç¨‹å›¾
   - åˆ¶å®šå¤ä¹ è®¡åˆ’æ€ç»´å¯¼å›¾

4. **æ•™å­¦äº’åŠ¨é˜¶æ®µ**
   - å°†æŠ½è±¡æ¦‚å¿µå…·è±¡åŒ–
   - æä¾›å¯åˆ†äº«çš„å­¦ä¹ èµ„æ–™

### Agentæ™ºèƒ½è°ƒç”¨ç­–ç•¥

```python
# åœ¨gap_identifier_reactèŠ‚ç‚¹ä¸­çš„åº”ç”¨ç¤ºä¾‹
if analysis_result.unclear_points:
    # å½“å‘ç°å¤šä¸ªç›¸å…³ç–‘ç‚¹æ—¶ï¼Œç”Ÿæˆæ€ç»´å¯¼å›¾
    if len(analysis_result.unclear_points) >= 3:
        mindmap_content = format_unclear_points_as_mindmap(analysis_result.unclear_points)
        mindmap_result = create_mindmap(
            topic=f"{state['topic']} ç–‘ç‚¹åˆ†æ",
            content=mindmap_content,
            style="mermaid"
        )
        # å°†æ€ç»´å¯¼å›¾ç»“æœæ·»åŠ åˆ°å“åº”ä¸­
```

## ğŸš€ æ€§èƒ½ä¼˜åŠ¿

### ä¸æœ¬åœ°å›¾å½¢åº“å¯¹æ¯”

| ç‰¹æ€§ | å¤–éƒ¨APIæ–¹æ¡ˆ | æœ¬åœ°å›¾å½¢åº“ |
|------|-------------|------------|
| å®‰è£…å¤æ‚åº¦ | â­ æ— éœ€å®‰è£… | â­â­â­ å¤æ‚ |
| è·¨å¹³å°å…¼å®¹ | â­â­â­ å®Œç¾ | â­â­ ä¸€èˆ¬ |
| å›¾ç‰‡è´¨é‡ | â­â­â­ ä¸“ä¸š | â­â­ ä¸­ç­‰ |
| åœ¨çº¿ç¼–è¾‘ | â­â­â­ æ”¯æŒ | â­ ä¸æ”¯æŒ |
| åˆ†äº«ä¾¿åˆ© | â­â­â­ ä¼˜ç§€ | â­ éœ€å¯¼å‡º |
| ç»´æŠ¤æˆæœ¬ | â­â­â­ ä½ | â­â­ ä¸­ç­‰ |

### å“åº”æ—¶é—´
- URLç¼–ç : < 1ms
- åœ¨çº¿æ¸²æŸ“: ç”¨æˆ·ç«¯å¤„ç†
- è¯­æ³•è½¬æ¢: < 5ms
- æ€»ä½“å»¶è¿Ÿ: å¯å¿½ç•¥

## ğŸ›¡ï¸ é”™è¯¯å¤„ç†

### å®¹é”™æœºåˆ¶
1. **APIä¸å¯ç”¨**: é™çº§åˆ°æ–‡æœ¬æ ¼å¼è¾“å‡º
2. **æ ¼å¼é”™è¯¯**: æä¾›æ ¼å¼ä¿®æ­£å»ºè®®
3. **å†…å®¹ä¸ºç©º**: è¿”å›å‹å¥½æç¤ºä¿¡æ¯
4. **ç¼–ç å¤±è´¥**: ä½¿ç”¨å¤‡ç”¨ç¼–ç æ–¹æ¡ˆ

### ç›‘æ§æŒ‡æ ‡
- APIè°ƒç”¨æˆåŠŸç‡
- é“¾æ¥æœ‰æ•ˆæ€§
- ç”¨æˆ·ç‚¹å‡»ç‡
- é”™è¯¯ç±»å‹åˆ†å¸ƒ

## ğŸ“ˆ æœªæ¥æ‰©å±•

### å¾…å¼€å‘åŠŸèƒ½
1. **æ›´å¤šå›¾è¡¨ç±»å‹**
   - ç”˜ç‰¹å›¾ï¼ˆé¡¹ç›®ç®¡ç†ï¼‰
   - æ—¶åºå›¾ï¼ˆè¿‡ç¨‹åˆ†æï¼‰
   - ç±»å›¾ï¼ˆç»“æ„åˆ†æï¼‰

2. **æ™ºèƒ½ä¼˜åŒ–**
   - è‡ªåŠ¨å¸ƒå±€ä¼˜åŒ–
   - é¢œè‰²ä¸»é¢˜é€‚é…
   - å†…å®¹å‹ç¼©å»ºè®®

3. **äº¤äº’å¢å¼º**
   - å®æ—¶åä½œç¼–è¾‘
   - ç‰ˆæœ¬å†å²ç®¡ç†
   - è¯„è®ºå’Œæ ‡æ³¨

### é›†æˆè®¡åˆ’
- [ ] ä¸knowledge_graphæ¨¡å—è”åŠ¨
- [ ] æ”¯æŒå¯¼å‡ºåˆ°å­¦ä¹ ç¬”è®°
- [ ] é›†æˆåˆ°å‰ç«¯ç•Œé¢å±•ç¤º
- [ ] æ”¯æŒæ‰¹é‡ç”Ÿæˆ

## ğŸ“ é…ç½®è¯´æ˜

### ç¯å¢ƒå˜é‡
```bash
# å¯é€‰çš„é«˜çº§åŠŸèƒ½API
QUICKCHART_API_KEY="your-quickchart-key"  # QuickChartæœåŠ¡
```

### ä¾èµ–åº“
```
# æ ¸å¿ƒä¾èµ–ï¼ˆPythonæ ‡å‡†åº“ï¼‰
urllib.parse  # URLç¼–ç 
base64        # Base64ç¼–ç   
zlib          # å‹ç¼©ç®—æ³•
json          # JSONå¤„ç†

# å¤–éƒ¨ä¾èµ–
requests      # HTTPè¯·æ±‚
```

## ğŸ‰ æ€»ç»“

æ€ç»´å¯¼å›¾å·¥å…·çš„æˆåŠŸæ·»åŠ ä¸ºAIå­¦ç”Ÿè´¹æ›¼å­¦ä¹ ç³»ç»Ÿå¸¦æ¥äº†å¼ºå¤§çš„å¯è§†åŒ–èƒ½åŠ›ï¼š

### æ ¸å¿ƒä»·å€¼
1. **å­¦ä¹ æ•ˆæœæå‡**: å°†æŠ½è±¡æ¦‚å¿µå¯è§†åŒ–ï¼Œå¸®åŠ©ç†è§£å’Œè®°å¿†
2. **äº¤äº’ä½“éªŒä¼˜åŒ–**: æä¾›ç›´è§‚çš„å›¾å½¢ç•Œé¢ï¼Œå¢å¼ºç”¨æˆ·ä½“éªŒ
3. **çŸ¥è¯†ç®¡ç†**: ç³»ç»ŸåŒ–ç»„ç»‡å­¦ä¹ å†…å®¹ï¼Œæ„å»ºçŸ¥è¯†ä½“ç³»
4. **æ•™å­¦è¾…åŠ©**: ä¸ºæ•™å¸ˆå’Œå­¦ä¹ è€…æä¾›ä¸“ä¸šçš„æ•™å­¦å·¥å…·

### æŠ€æœ¯äº®ç‚¹
1. **é›¶ä¾èµ–éƒ¨ç½²**: å®Œå…¨åŸºäºå¤–éƒ¨APIï¼Œæ— éœ€å¤æ‚çš„æœ¬åœ°ç¯å¢ƒ
2. **å¤šæ ¼å¼æ”¯æŒ**: æ»¡è¶³ä¸åŒç”¨æˆ·å’Œåœºæ™¯çš„éœ€æ±‚
3. **æ™ºèƒ½è½¬æ¢**: è‡ªåŠ¨è¯†åˆ«å†…å®¹ç»“æ„ï¼Œç”Ÿæˆæ ‡å‡†åŒ–å›¾è¡¨
4. **åœ¨çº¿åä½œ**: æ”¯æŒåˆ†äº«å’ŒååŒç¼–è¾‘

### ç³»ç»Ÿé›†æˆ
- âœ… ä¸ç°æœ‰Agentå·¥å…·ä½“ç³»å®Œç¾èåˆ
- âœ… æ”¯æŒæµå¼è¾“å‡ºå’Œå®æ—¶å“åº”
- âœ… éµå¾ªè´¹æ›¼å­¦ä¹ æ³•æ•™å­¦ç†å¿µ
- âœ… æä¾›å®Œæ•´çš„æ–‡æ¡£å’Œæµ‹è¯•è¦†ç›–

è¿™å¥—æ€ç»´å¯¼å›¾å·¥å…·å°†æ˜¾è‘—å¢å¼ºAIå­¦ç”ŸAgentçš„æ•™å­¦èƒ½åŠ›ï¼Œä¸ºç”¨æˆ·æä¾›æ›´ç›´è§‚ã€æ›´æœ‰æ•ˆçš„å­¦ä¹ ä½“éªŒã€‚

